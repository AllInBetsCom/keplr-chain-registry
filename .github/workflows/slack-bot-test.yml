name: Slack Bot Test
on:
  push:
    branches: [slack-bot-test]

jobs:
  validation:
    name: Slack Bot Test
    runs-on: ubuntu-20.04

    steps:
      - name: Slack Alert Notification
        uses: slackapi/slack-github-action@v1.25.0
        if: ${{ steps.check-update.outputs.hasError }}
        with:
          channel-id: ${{ secrets.SLACK_CHANNEL_ID }}
          payload: |
            {
              "text": "Suggest Chain Alert",
              "attachments": [
                {
                  "color": "FB486C",
                  "fields": [
                    {
                      "title": "Error Message",
                      "short": false,
                      "value": "${{ steps.check-update.outputs.errorMessage }}"
                    }
                  ]
                }
              ]
            }
        env:
          SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}
